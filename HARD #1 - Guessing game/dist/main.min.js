(function () {
'use strict';

var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};

var createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
}();









var inherits = function (subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
};











var possibleConstructorReturn = function (self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return call && (typeof call === "object" || typeof call === "function") ? call : self;
};

var UIElement = function () {
	function UIElement() {
		classCallCheck(this, UIElement);

		this.element;
	}

	createClass(UIElement, [{
		key: "render",
		value: function render(target) {
			if (target) {
				var targetElement = document.getElementsByClassName(target)[0];
				if (targetElement) {
					targetElement.appendChild(this.element);
				}
			}
		}
	}]);
	return UIElement;
}();

var Button = function (_UIElement) {
	inherits(Button, _UIElement);

	function Button(id, className, text) {
		classCallCheck(this, Button);

		var _this = possibleConstructorReturn(this, (Button.__proto__ || Object.getPrototypeOf(Button)).call(this));

		_this.element = document.createElement('button');
		_this.element.innerText = text;
		_this.element.setAttribute('id', id);
		_this.element.classList.add('btn', className);
		return _this;
	}

	createClass(Button, [{
		key: 'event',
		value: function event(_event, callback) {
			console.log('Adding event "' + _event + '" for #' + this.element.getAttribute('id'), callback);
			this.element.addEventListener(_event, callback);
		}
	}]);
	return Button;
}(UIElement);

var Text = function (_UIElement) {
	inherits(Text, _UIElement);

	function Text(text) {
		classCallCheck(this, Text);

		var _this = possibleConstructorReturn(this, (Text.__proto__ || Object.getPrototypeOf(Text)).call(this));

		_this.element = document.createElement('p');
		_this.element.innerText = text;
		_this.element.classList.add('text');
		return _this;
	}

	return Text;
}(UIElement);

var NumberField = function (_UIElement) {
	inherits(NumberField, _UIElement);

	function NumberField(id, className) {
		classCallCheck(this, NumberField);

		var _this = possibleConstructorReturn(this, (NumberField.__proto__ || Object.getPrototypeOf(NumberField)).call(this));

		_this.element = document.createElement('div');
		_this.element.classList.add(className);
		_this.element.setAttribute('id', id);
		return _this;
	}

	return NumberField;
}(UIElement);

var UIHandler = function () {
	function UIHandler() {
		classCallCheck(this, UIHandler);

		// All used UI elements
		this.buttons = {
			start: new Button('play', 'btn--green', 'Play!'),
			higher: new Button('higher', 'btn--green', 'Higher!'),
			lower: new Button('lower', 'btn--red', 'Lower!'),
			correct: new Button('correct', 'btn--blue', 'Correct!'),
			restart: new Button('restart', 'btn--red', 'Restart!')
		};
		this.text = {
			intro: new Text('Let\'s play a number guessing game.'),
			inGame: new Text('Is your number...'),
			impossible: new Text('This game is impossible!'),
			win: new Text('So I finally won the game! Thanks for playing with me. :)')
		};
		this.numberField = new NumberField("numberField", "number");

		// What is rendered on particular stages
		this.mainMenu = {
			game__content: [this.text.intro],
			game__buttons: [this.buttons.start]
		};
		this.gamePlay = {
			game__content: [this.text.inGame, this.numberField],
			game__buttons: [this.buttons.higher, this.buttons.correct, this.buttons.lower]
		};
		this.Impossible = {
			game__content: [this.text.impossible],
			game__buttons: [this.buttons.restart]
		};
		this.Win = {
			game__content: [this.text.win],
			game__buttons: [this.buttons.restart]
		};
	}

	createClass(UIHandler, [{
		key: 'clear',
		value: function clear() {
			console.log('Clearing game');
			document.getElementsByClassName('game__content')[0].innerHTML = '';
			document.getElementsByClassName('game__buttons')[0].innerHTML = '';
		}
	}, {
		key: 'render',
		value: function render(gameStatus) {
			var _this = this;

			this.clear();

			var _loop = function _loop(x) {
				console.log(_this[gameStatus][x]);
				_this[gameStatus][x].forEach(function (element) {
					if (element.render) element.render(x);
				});
			};

			for (var x in this[gameStatus]) {
				_loop(x);
			}
		}
	}, {
		key: 'renderNumber',
		value: function renderNumber(number) {
			this.numberField.element.innerText = number + '?';
		}
	}]);
	return UIHandler;
}();

var Game = function () {
	function Game() {
		classCallCheck(this, Game);

		this.status = 'mainMenu';
		this.lastNumber = 0;
		this.currentNumber = 0;
		this.numbersGuessed = [];

		this.minNumber = 0;
		this.maxNumber = 100;

		this.UI = new UIHandler();
	}

	createClass(Game, [{
		key: 'init',
		value: function init() {
			var _this = this;
			this.setStatus('mainMenu');
			this.UI.buttons['start'].event("click", function () {
				return _this.startGame();
			});
			this.UI.buttons['higher'].event("click", function () {
				return _this.checkAnswer('higher');
			});
			this.UI.buttons['lower'].event("click", function () {
				return _this.checkAnswer('lower');
			});
			this.UI.buttons['correct'].event("click", function () {
				return _this.checkAnswer('correct');
			});
			this.UI.buttons['restart'].event("click", function () {
				return _this.startGame();
			});
		}
	}, {
		key: 'getStatus',
		value: function getStatus() {
			return this.status;
		}
	}, {
		key: 'setStatus',
		value: function setStatus(newStatus) {
			this.status = newStatus;
			this.UI.render(this.getStatus());
		}
	}, {
		key: 'startGame',
		value: function startGame() {
			// restore the defaults
			this.currentNumber = 0;
			this.lastNumber = 0;
			this.numbersGuessed = [];
			this.minNumber = 0;
			this.maxNumber = 100;

			// start the game
			this.setStatus("gamePlay");
			this.generateNumber();
		}
	}, {
		key: 'generateNumber',
		value: function generateNumber() {
			this.currentNumber = this.getRandomNumber();
			this.UI.renderNumber(this.currentNumber);
		}
	}, {
		key: 'checkAnswer',
		value: function checkAnswer(answer) {
			this.lastNumber = this.currentNumber;
			this.numbersGuessed.push(this.currentNumber);

			if (answer == 'higher') {
				this.minNumber = this.lastNumber;
			} else if (answer == 'lower') {
				this.maxNumber = this.lastNumber;
			} else if (answer == 'correct') {
				this.setStatus('Win');
				return true;
			}

			console.log('Numbers: ' + this.numbersGuessed, 'min: ' + this.minNumber, 'max: ' + this.maxNumber);
			if (this.minNumber + 1 >= this.maxNumber) {
				this.setStatus('Impossible');
				return false;
			}
			this.generateNumber();
		}
	}, {
		key: 'getRandomNumber',
		value: function getRandomNumber() {
			do {
				var number = Math.floor(Math.random() * (this.maxNumber - this.minNumber + 1)) + this.minNumber;
			} while (this.numbersGuessed.includes(number) && this.minNumber < this.maxNumber);
			return number;
		}
	}]);
	return Game;
}();

var game = new Game();
game.init();

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9qcy9jbGFzcy5VSUVsZW1lbnQuanMiLCIuLi9zcmMvanMvVUkvQnV0dG9uLmpzIiwiLi4vc3JjL2pzL1VJL1RleHQuanMiLCIuLi9zcmMvanMvVUkvTnVtYmVyRmllbGQuanMiLCIuLi9zcmMvanMvY2xhc3MuVUlIYW5kbGVyLmpzIiwiLi4vc3JjL2pzL2NsYXNzLkdhbWUuanMiLCIuLi9zcmMvbWFpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgVUlFbGVtZW50IHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMuZWxlbWVudDtcclxuXHR9XHJcblx0cmVuZGVyKHRhcmdldCkge1xyXG5cdFx0aWYodGFyZ2V0KSB7XHJcblx0XHRcdHZhciB0YXJnZXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSh0YXJnZXQpWzBdO1xyXG5cdFx0XHRpZih0YXJnZXRFbGVtZW50KSB7XHJcblx0XHRcdFx0dGFyZ2V0RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59IiwiaW1wb3J0IHsgVUlFbGVtZW50IH0gZnJvbSAnLi4vY2xhc3MuVUlFbGVtZW50LmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBCdXR0b24gZXh0ZW5kcyBVSUVsZW1lbnQge1xyXG5cdGNvbnN0cnVjdG9yKGlkLCBjbGFzc05hbWUsIHRleHQpIHtcclxuXHRcdHN1cGVyKCk7XHJcblx0XHR0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuXHRcdHRoaXMuZWxlbWVudC5pbm5lclRleHQgPSB0ZXh0O1xyXG5cdFx0dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XHJcblx0XHR0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYnRuJywgY2xhc3NOYW1lKTtcclxuXHR9XHJcblx0ZXZlbnQoZXZlbnQsIGNhbGxiYWNrKSB7XHJcblx0XHRjb25zb2xlLmxvZygnQWRkaW5nIGV2ZW50IFwiJyArIGV2ZW50ICsgJ1wiIGZvciAjJyArIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJyksIGNhbGxiYWNrKTtcclxuXHRcdHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBjYWxsYmFjayk7XHJcblx0fVxyXG59IiwiaW1wb3J0IHsgVUlFbGVtZW50IH0gZnJvbSAnLi4vY2xhc3MuVUlFbGVtZW50LmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUZXh0IGV4dGVuZHMgVUlFbGVtZW50IHtcclxuXHRjb25zdHJ1Y3Rvcih0ZXh0KSB7XHJcblx0XHRzdXBlcigpO1xyXG5cdFx0dGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG5cdFx0dGhpcy5lbGVtZW50LmlubmVyVGV4dCA9IHRleHQ7XHJcblx0XHR0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndGV4dCcpO1xyXG5cdH1cclxufSIsImltcG9ydCB7IFVJRWxlbWVudCB9IGZyb20gJy4uL2NsYXNzLlVJRWxlbWVudC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgTnVtYmVyRmllbGQgZXh0ZW5kcyBVSUVsZW1lbnQge1xyXG5cdGNvbnN0cnVjdG9yKGlkLCBjbGFzc05hbWUpIHtcclxuXHRcdHN1cGVyKCk7XHJcblx0XHR0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XHJcblx0XHR0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsIGlkKTtcclxuXHR9XHJcbn0iLCJpbXBvcnQgeyBVSUVsZW1lbnQgfSBmcm9tICcuL2NsYXNzLlVJRWxlbWVudC5qcyc7XHJcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJy4vVUkvQnV0dG9uLmpzJztcclxuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4vVUkvVGV4dC5qcyc7XHJcbmltcG9ydCB7IE51bWJlckZpZWxkIH0gZnJvbSAnLi9VSS9OdW1iZXJGaWVsZC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgVUlIYW5kbGVyIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdC8vIEFsbCB1c2VkIFVJIGVsZW1lbnRzXHJcblx0XHR0aGlzLmJ1dHRvbnMgPSB7XHJcblx0XHRcdHN0YXJ0OiBuZXcgQnV0dG9uKCdwbGF5JywgJ2J0bi0tZ3JlZW4nLCAnUGxheSEnKSxcclxuXHRcdFx0aGlnaGVyOiBuZXcgQnV0dG9uKCdoaWdoZXInLCAnYnRuLS1ncmVlbicsICdIaWdoZXIhJyksXHJcblx0XHRcdGxvd2VyOiBuZXcgQnV0dG9uKCdsb3dlcicsICdidG4tLXJlZCcsICdMb3dlciEnKSxcclxuXHRcdFx0Y29ycmVjdDogbmV3IEJ1dHRvbignY29ycmVjdCcsICdidG4tLWJsdWUnLCAnQ29ycmVjdCEnKSxcclxuXHRcdFx0cmVzdGFydDogbmV3IEJ1dHRvbigncmVzdGFydCcsICdidG4tLXJlZCcsICdSZXN0YXJ0IScpXHJcblx0XHR9O1xyXG5cdFx0dGhpcy50ZXh0ID0ge1xyXG5cdFx0XHRpbnRybzogbmV3IFRleHQoJ0xldFxcJ3MgcGxheSBhIG51bWJlciBndWVzc2luZyBnYW1lLicpLFxyXG5cdFx0XHRpbkdhbWU6IG5ldyBUZXh0KCdJcyB5b3VyIG51bWJlci4uLicpLFxyXG5cdFx0XHRpbXBvc3NpYmxlOiBuZXcgVGV4dCgnVGhpcyBnYW1lIGlzIGltcG9zc2libGUhJyksXHJcblx0XHRcdHdpbjogbmV3IFRleHQoJ1NvIEkgZmluYWxseSB3b24gdGhlIGdhbWUhIFRoYW5rcyBmb3IgcGxheWluZyB3aXRoIG1lLiA6KScpXHJcblx0XHR9O1xyXG5cdFx0dGhpcy5udW1iZXJGaWVsZCA9IG5ldyBOdW1iZXJGaWVsZChcIm51bWJlckZpZWxkXCIsIFwibnVtYmVyXCIpO1xyXG5cclxuXHRcdC8vIFdoYXQgaXMgcmVuZGVyZWQgb24gcGFydGljdWxhciBzdGFnZXNcclxuXHRcdHRoaXMubWFpbk1lbnUgPSB7XHJcblx0XHRcdGdhbWVfX2NvbnRlbnQ6IFt0aGlzLnRleHQuaW50cm9dLFxyXG5cdFx0XHRnYW1lX19idXR0b25zOiBbdGhpcy5idXR0b25zLnN0YXJ0XVxyXG5cdFx0fTtcclxuXHRcdHRoaXMuZ2FtZVBsYXkgPSB7XHJcblx0XHRcdGdhbWVfX2NvbnRlbnQ6IFt0aGlzLnRleHQuaW5HYW1lLCB0aGlzLm51bWJlckZpZWxkXSxcclxuXHRcdFx0Z2FtZV9fYnV0dG9uczogW3RoaXMuYnV0dG9ucy5oaWdoZXIsIHRoaXMuYnV0dG9ucy5jb3JyZWN0LCB0aGlzLmJ1dHRvbnMubG93ZXJdXHJcblx0XHR9O1xyXG5cdFx0dGhpcy5JbXBvc3NpYmxlID0ge1xyXG5cdFx0XHRnYW1lX19jb250ZW50OiBbdGhpcy50ZXh0LmltcG9zc2libGVdLFxyXG5cdFx0XHRnYW1lX19idXR0b25zOiBbdGhpcy5idXR0b25zLnJlc3RhcnRdXHJcblx0XHR9XHJcblx0XHR0aGlzLldpbiA9IHtcclxuXHRcdFx0Z2FtZV9fY29udGVudDogW3RoaXMudGV4dC53aW5dLFxyXG5cdFx0XHRnYW1lX19idXR0b25zOiBbdGhpcy5idXR0b25zLnJlc3RhcnRdXHJcblx0XHR9XHJcblx0fVxyXG5cdGNsZWFyKCkge1xyXG5cdFx0Y29uc29sZS5sb2coJ0NsZWFyaW5nIGdhbWUnKTtcclxuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dhbWVfX2NvbnRlbnQnKVswXS5pbm5lckhUTUwgPSAnJztcclxuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dhbWVfX2J1dHRvbnMnKVswXS5pbm5lckhUTUwgPSAnJztcclxuXHR9XHJcblx0cmVuZGVyKGdhbWVTdGF0dXMpIHtcclxuXHRcdHRoaXMuY2xlYXIoKTtcclxuXHRcdGZvcihsZXQgeCBpbiB0aGlzW2dhbWVTdGF0dXNdKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKHRoaXNbZ2FtZVN0YXR1c11beF0pO1xyXG5cdFx0XHR0aGlzW2dhbWVTdGF0dXNdW3hdLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuXHRcdFx0XHRpZihlbGVtZW50LnJlbmRlcilcclxuXHRcdFx0XHRcdGVsZW1lbnQucmVuZGVyKHgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblx0cmVuZGVyTnVtYmVyKG51bWJlcikge1xyXG5cdFx0dGhpcy5udW1iZXJGaWVsZC5lbGVtZW50LmlubmVyVGV4dCA9IG51bWJlciArICc/JztcclxuXHR9XHJcbn0iLCJpbXBvcnQgeyBVSUhhbmRsZXIgfSBmcm9tICcuL2NsYXNzLlVJSGFuZGxlci5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgR2FtZSB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHR0aGlzLnN0YXR1cyA9ICdtYWluTWVudSc7XHJcblx0XHR0aGlzLmxhc3ROdW1iZXIgPSAwO1xyXG5cdFx0dGhpcy5jdXJyZW50TnVtYmVyID0gMDtcclxuXHRcdHRoaXMubnVtYmVyc0d1ZXNzZWQgPSBbXTtcclxuXHJcblx0XHR0aGlzLm1pbk51bWJlciA9IDA7XHJcblx0XHR0aGlzLm1heE51bWJlciA9IDEwMDtcclxuXHJcblx0XHR0aGlzLlVJID0gbmV3IFVJSGFuZGxlcjtcclxuXHR9XHJcblx0aW5pdCgpIHtcclxuXHRcdHZhciBfdGhpcyA9IHRoaXM7XHJcblx0XHR0aGlzLnNldFN0YXR1cygnbWFpbk1lbnUnKTtcclxuXHRcdHRoaXMuVUkuYnV0dG9uc1snc3RhcnQnXS5ldmVudChcImNsaWNrXCIsICgoKSA9PiBfdGhpcy5zdGFydEdhbWUoKSkpO1xyXG5cdFx0dGhpcy5VSS5idXR0b25zWydoaWdoZXInXS5ldmVudChcImNsaWNrXCIsICgoKSA9PiBfdGhpcy5jaGVja0Fuc3dlcignaGlnaGVyJykpKTtcclxuXHRcdHRoaXMuVUkuYnV0dG9uc1snbG93ZXInXS5ldmVudChcImNsaWNrXCIsICgoKSA9PiBfdGhpcy5jaGVja0Fuc3dlcignbG93ZXInKSkpO1xyXG5cdFx0dGhpcy5VSS5idXR0b25zWydjb3JyZWN0J10uZXZlbnQoXCJjbGlja1wiLCAoKCkgPT4gX3RoaXMuY2hlY2tBbnN3ZXIoJ2NvcnJlY3QnKSkpO1xyXG5cdFx0dGhpcy5VSS5idXR0b25zWydyZXN0YXJ0J10uZXZlbnQoXCJjbGlja1wiLCAoKCkgPT4gX3RoaXMuc3RhcnRHYW1lKCkpKTtcclxuXHR9XHJcblx0Z2V0U3RhdHVzKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuc3RhdHVzO1xyXG5cdH1cclxuXHRzZXRTdGF0dXMobmV3U3RhdHVzKSB7XHJcblx0XHR0aGlzLnN0YXR1cyA9IG5ld1N0YXR1cztcclxuXHRcdHRoaXMuVUkucmVuZGVyKHRoaXMuZ2V0U3RhdHVzKCkpO1xyXG5cdH1cclxuXHRzdGFydEdhbWUoKSB7XHJcblx0XHQvLyByZXN0b3JlIHRoZSBkZWZhdWx0c1xyXG5cdFx0dGhpcy5jdXJyZW50TnVtYmVyID0gMDtcclxuXHRcdHRoaXMubGFzdE51bWJlciA9IDA7XHJcblx0XHR0aGlzLm51bWJlcnNHdWVzc2VkID0gW107XHJcblx0XHR0aGlzLm1pbk51bWJlciA9IDA7XHJcblx0XHR0aGlzLm1heE51bWJlciA9IDEwMDtcclxuXHJcblx0XHQvLyBzdGFydCB0aGUgZ2FtZVxyXG5cdFx0dGhpcy5zZXRTdGF0dXMoXCJnYW1lUGxheVwiKTtcclxuXHRcdHRoaXMuZ2VuZXJhdGVOdW1iZXIoKTtcclxuXHR9XHJcblx0Z2VuZXJhdGVOdW1iZXIoKSB7XHJcblx0XHR0aGlzLmN1cnJlbnROdW1iZXIgPSB0aGlzLmdldFJhbmRvbU51bWJlcigpO1xyXG5cdFx0dGhpcy5VSS5yZW5kZXJOdW1iZXIodGhpcy5jdXJyZW50TnVtYmVyKTtcclxuXHR9XHJcblx0Y2hlY2tBbnN3ZXIoYW5zd2VyKSB7XHJcblx0XHR0aGlzLmxhc3ROdW1iZXIgPSB0aGlzLmN1cnJlbnROdW1iZXI7XHJcblx0XHR0aGlzLm51bWJlcnNHdWVzc2VkLnB1c2godGhpcy5jdXJyZW50TnVtYmVyKTtcclxuXHJcblx0XHRpZihhbnN3ZXIgPT0gJ2hpZ2hlcicpIHtcclxuXHRcdFx0dGhpcy5taW5OdW1iZXIgPSB0aGlzLmxhc3ROdW1iZXI7XHJcblx0XHR9IGVsc2UgaWYoYW5zd2VyID09ICdsb3dlcicpIHtcclxuXHRcdFx0dGhpcy5tYXhOdW1iZXIgPSB0aGlzLmxhc3ROdW1iZXI7XHJcblx0XHR9IGVsc2UgaWYoYW5zd2VyID09ICdjb3JyZWN0Jykge1xyXG5cdFx0XHR0aGlzLnNldFN0YXR1cygnV2luJyk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnNvbGUubG9nKCdOdW1iZXJzOiAnICsgdGhpcy5udW1iZXJzR3Vlc3NlZCwgJ21pbjogJyArIHRoaXMubWluTnVtYmVyLCAnbWF4OiAnICsgdGhpcy5tYXhOdW1iZXIpO1xyXG5cdFx0aWYodGhpcy5taW5OdW1iZXIrMSA+PSB0aGlzLm1heE51bWJlcikge1xyXG5cdFx0XHR0aGlzLnNldFN0YXR1cygnSW1wb3NzaWJsZScpO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHR0aGlzLmdlbmVyYXRlTnVtYmVyKCk7XHJcblx0fVxyXG5cdGdldFJhbmRvbU51bWJlcigpIHtcclxuXHRcdGRvIHtcclxuXHRcdFx0dmFyIG51bWJlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICh0aGlzLm1heE51bWJlciAtIHRoaXMubWluTnVtYmVyICsgMSkpICsgdGhpcy5taW5OdW1iZXI7XHJcblx0XHR9IHdoaWxlKHRoaXMubnVtYmVyc0d1ZXNzZWQuaW5jbHVkZXMobnVtYmVyKSAmJiB0aGlzLm1pbk51bWJlciA8IHRoaXMubWF4TnVtYmVyKTtcclxuXHRcdHJldHVybiBudW1iZXI7XHJcblx0fVxyXG59IiwiaW1wb3J0IHsgR2FtZSB9IGZyb20gJy4vanMvY2xhc3MuR2FtZS5qcyc7XHJcblxyXG52YXIgZ2FtZSA9IG5ldyBHYW1lO1xyXG5nYW1lLmluaXQoKTsiXSwibmFtZXMiOlsiVUlFbGVtZW50IiwiZWxlbWVudCIsInRhcmdldCIsInRhcmdldEVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJhcHBlbmRDaGlsZCIsIkJ1dHRvbiIsImlkIiwiY2xhc3NOYW1lIiwidGV4dCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lclRleHQiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJldmVudCIsImNhbGxiYWNrIiwibG9nIiwiZ2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlRleHQiLCJOdW1iZXJGaWVsZCIsIlVJSGFuZGxlciIsImJ1dHRvbnMiLCJudW1iZXJGaWVsZCIsIm1haW5NZW51IiwiaW50cm8iLCJzdGFydCIsImdhbWVQbGF5IiwiaW5HYW1lIiwiaGlnaGVyIiwiY29ycmVjdCIsImxvd2VyIiwiSW1wb3NzaWJsZSIsImltcG9zc2libGUiLCJyZXN0YXJ0IiwiV2luIiwid2luIiwiaW5uZXJIVE1MIiwiZ2FtZVN0YXR1cyIsImNsZWFyIiwieCIsImZvckVhY2giLCJyZW5kZXIiLCJudW1iZXIiLCJHYW1lIiwic3RhdHVzIiwibGFzdE51bWJlciIsImN1cnJlbnROdW1iZXIiLCJudW1iZXJzR3Vlc3NlZCIsIm1pbk51bWJlciIsIm1heE51bWJlciIsIlVJIiwiX3RoaXMiLCJzZXRTdGF0dXMiLCJzdGFydEdhbWUiLCJjaGVja0Fuc3dlciIsIm5ld1N0YXR1cyIsImdldFN0YXR1cyIsImdlbmVyYXRlTnVtYmVyIiwiZ2V0UmFuZG9tTnVtYmVyIiwicmVuZGVyTnVtYmVyIiwiYW5zd2VyIiwicHVzaCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImluY2x1ZGVzIiwiZ2FtZSIsImluaXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUFhQSxTQUFiO3NCQUNlOzs7T0FDUkMsT0FBTDs7Ozs7eUJBRU1DLE1BSlIsRUFJZ0I7T0FDWEEsTUFBSCxFQUFXO1FBQ05DLGdCQUFnQkMsU0FBU0Msc0JBQVQsQ0FBZ0NILE1BQWhDLEVBQXdDLENBQXhDLENBQXBCO1FBQ0dDLGFBQUgsRUFBa0I7bUJBQ0hHLFdBQWQsQ0FBMEIsS0FBS0wsT0FBL0I7Ozs7Ozs7O0lDTlNNOzs7aUJBQ0FDLEVBQVosRUFBZ0JDLFNBQWhCLEVBQTJCQyxJQUEzQixFQUFpQzs7Ozs7UUFFM0JULE9BQUwsR0FBZUcsU0FBU08sYUFBVCxDQUF1QixRQUF2QixDQUFmO1FBQ0tWLE9BQUwsQ0FBYVcsU0FBYixHQUF5QkYsSUFBekI7UUFDS1QsT0FBTCxDQUFhWSxZQUFiLENBQTBCLElBQTFCLEVBQWdDTCxFQUFoQztRQUNLUCxPQUFMLENBQWFhLFNBQWIsQ0FBdUJDLEdBQXZCLENBQTJCLEtBQTNCLEVBQWtDTixTQUFsQzs7Ozs7O3dCQUVLTyxRQUFPQyxVQUFVO1dBQ2RDLEdBQVIsQ0FBWSxtQkFBbUJGLE1BQW5CLEdBQTJCLFNBQTNCLEdBQXVDLEtBQUtmLE9BQUwsQ0FBYWtCLFlBQWIsQ0FBMEIsSUFBMUIsQ0FBbkQsRUFBb0ZGLFFBQXBGO1FBQ0toQixPQUFMLENBQWFtQixnQkFBYixDQUE4QkosTUFBOUIsRUFBcUNDLFFBQXJDOzs7O0VBVjBCakI7O0lDQWZxQixJQUFiOzs7ZUFDYVgsSUFBWixFQUFrQjs7Ozs7UUFFWlQsT0FBTCxHQUFlRyxTQUFTTyxhQUFULENBQXVCLEdBQXZCLENBQWY7UUFDS1YsT0FBTCxDQUFhVyxTQUFiLEdBQXlCRixJQUF6QjtRQUNLVCxPQUFMLENBQWFhLFNBQWIsQ0FBdUJDLEdBQXZCLENBQTJCLE1BQTNCOzs7OztFQUx3QmYsU0FBMUI7O0lDQWFzQixXQUFiOzs7c0JBQ2FkLEVBQVosRUFBZ0JDLFNBQWhCLEVBQTJCOzs7OztRQUVyQlIsT0FBTCxHQUFlRyxTQUFTTyxhQUFULENBQXVCLEtBQXZCLENBQWY7UUFDS1YsT0FBTCxDQUFhYSxTQUFiLENBQXVCQyxHQUF2QixDQUEyQk4sU0FBM0I7UUFDS1IsT0FBTCxDQUFhWSxZQUFiLENBQTBCLElBQTFCLEVBQWdDTCxFQUFoQzs7Ozs7RUFMK0JSLFNBQWpDOztJQ0dhdUIsU0FBYjtzQkFDZTs7OztPQUVSQyxPQUFMLEdBQWU7VUFDUCxJQUFJakIsTUFBSixDQUFXLE1BQVgsRUFBbUIsWUFBbkIsRUFBaUMsT0FBakMsQ0FETztXQUVOLElBQUlBLE1BQUosQ0FBVyxRQUFYLEVBQXFCLFlBQXJCLEVBQW1DLFNBQW5DLENBRk07VUFHUCxJQUFJQSxNQUFKLENBQVcsT0FBWCxFQUFvQixVQUFwQixFQUFnQyxRQUFoQyxDQUhPO1lBSUwsSUFBSUEsTUFBSixDQUFXLFNBQVgsRUFBc0IsV0FBdEIsRUFBbUMsVUFBbkMsQ0FKSztZQUtMLElBQUlBLE1BQUosQ0FBVyxTQUFYLEVBQXNCLFVBQXRCLEVBQWtDLFVBQWxDO0dBTFY7T0FPS0csSUFBTCxHQUFZO1VBQ0osSUFBSVcsSUFBSixDQUFTLHFDQUFULENBREk7V0FFSCxJQUFJQSxJQUFKLENBQVMsbUJBQVQsQ0FGRztlQUdDLElBQUlBLElBQUosQ0FBUywwQkFBVCxDQUhEO1FBSU4sSUFBSUEsSUFBSixDQUFTLDJEQUFUO0dBSk47T0FNS0ksV0FBTCxHQUFtQixJQUFJSCxXQUFKLENBQWdCLGFBQWhCLEVBQStCLFFBQS9CLENBQW5COzs7T0FHS0ksUUFBTCxHQUFnQjtrQkFDQSxDQUFDLEtBQUtoQixJQUFMLENBQVVpQixLQUFYLENBREE7a0JBRUEsQ0FBQyxLQUFLSCxPQUFMLENBQWFJLEtBQWQ7R0FGaEI7T0FJS0MsUUFBTCxHQUFnQjtrQkFDQSxDQUFDLEtBQUtuQixJQUFMLENBQVVvQixNQUFYLEVBQW1CLEtBQUtMLFdBQXhCLENBREE7a0JBRUEsQ0FBQyxLQUFLRCxPQUFMLENBQWFPLE1BQWQsRUFBc0IsS0FBS1AsT0FBTCxDQUFhUSxPQUFuQyxFQUE0QyxLQUFLUixPQUFMLENBQWFTLEtBQXpEO0dBRmhCO09BSUtDLFVBQUwsR0FBa0I7a0JBQ0YsQ0FBQyxLQUFLeEIsSUFBTCxDQUFVeUIsVUFBWCxDQURFO2tCQUVGLENBQUMsS0FBS1gsT0FBTCxDQUFhWSxPQUFkO0dBRmhCO09BSUtDLEdBQUwsR0FBVztrQkFDSyxDQUFDLEtBQUszQixJQUFMLENBQVU0QixHQUFYLENBREw7a0JBRUssQ0FBQyxLQUFLZCxPQUFMLENBQWFZLE9BQWQ7R0FGaEI7Ozs7OzBCQUtPO1dBQ0NsQixHQUFSLENBQVksZUFBWjtZQUNTYixzQkFBVCxDQUFnQyxlQUFoQyxFQUFpRCxDQUFqRCxFQUFvRGtDLFNBQXBELEdBQWdFLEVBQWhFO1lBQ1NsQyxzQkFBVCxDQUFnQyxlQUFoQyxFQUFpRCxDQUFqRCxFQUFvRGtDLFNBQXBELEdBQWdFLEVBQWhFOzs7O3lCQUVNQyxVQXpDUixFQXlDb0I7OztRQUNiQyxLQUFMOzs4QkFDUUMsQ0FGVTtZQUdUeEIsR0FBUixDQUFZLE1BQUtzQixVQUFMLEVBQWlCRSxDQUFqQixDQUFaO1VBQ0tGLFVBQUwsRUFBaUJFLENBQWpCLEVBQW9CQyxPQUFwQixDQUE0QixVQUFDMUMsT0FBRCxFQUFhO1NBQ3JDQSxRQUFRMkMsTUFBWCxFQUNDM0MsUUFBUTJDLE1BQVIsQ0FBZUYsQ0FBZjtLQUZGOzs7UUFGRyxJQUFJQSxDQUFSLElBQWEsS0FBS0YsVUFBTCxDQUFiLEVBQStCO1VBQXZCRSxDQUF1Qjs7Ozs7K0JBUW5CRyxNQW5EZCxFQW1Ec0I7UUFDZnBCLFdBQUwsQ0FBaUJ4QixPQUFqQixDQUF5QlcsU0FBekIsR0FBcUNpQyxTQUFTLEdBQTlDOzs7Ozs7SUN2RFdDLElBQWI7aUJBQ2U7OztPQUNSQyxNQUFMLEdBQWMsVUFBZDtPQUNLQyxVQUFMLEdBQWtCLENBQWxCO09BQ0tDLGFBQUwsR0FBcUIsQ0FBckI7T0FDS0MsY0FBTCxHQUFzQixFQUF0Qjs7T0FFS0MsU0FBTCxHQUFpQixDQUFqQjtPQUNLQyxTQUFMLEdBQWlCLEdBQWpCOztPQUVLQyxFQUFMLEdBQVUsSUFBSTlCLFNBQUosRUFBVjs7Ozs7eUJBRU07T0FDRitCLFFBQVEsSUFBWjtRQUNLQyxTQUFMLENBQWUsVUFBZjtRQUNLRixFQUFMLENBQVE3QixPQUFSLENBQWdCLE9BQWhCLEVBQXlCUixLQUF6QixDQUErQixPQUEvQixFQUF5QztXQUFNc0MsTUFBTUUsU0FBTixFQUFOO0lBQXpDO1FBQ0tILEVBQUwsQ0FBUTdCLE9BQVIsQ0FBZ0IsUUFBaEIsRUFBMEJSLEtBQTFCLENBQWdDLE9BQWhDLEVBQTBDO1dBQU1zQyxNQUFNRyxXQUFOLENBQWtCLFFBQWxCLENBQU47SUFBMUM7UUFDS0osRUFBTCxDQUFRN0IsT0FBUixDQUFnQixPQUFoQixFQUF5QlIsS0FBekIsQ0FBK0IsT0FBL0IsRUFBeUM7V0FBTXNDLE1BQU1HLFdBQU4sQ0FBa0IsT0FBbEIsQ0FBTjtJQUF6QztRQUNLSixFQUFMLENBQVE3QixPQUFSLENBQWdCLFNBQWhCLEVBQTJCUixLQUEzQixDQUFpQyxPQUFqQyxFQUEyQztXQUFNc0MsTUFBTUcsV0FBTixDQUFrQixTQUFsQixDQUFOO0lBQTNDO1FBQ0tKLEVBQUwsQ0FBUTdCLE9BQVIsQ0FBZ0IsU0FBaEIsRUFBMkJSLEtBQTNCLENBQWlDLE9BQWpDLEVBQTJDO1dBQU1zQyxNQUFNRSxTQUFOLEVBQU47SUFBM0M7Ozs7OEJBRVc7VUFDSixLQUFLVCxNQUFaOzs7OzRCQUVTVyxTQXhCWCxFQXdCc0I7UUFDZlgsTUFBTCxHQUFjVyxTQUFkO1FBQ0tMLEVBQUwsQ0FBUVQsTUFBUixDQUFlLEtBQUtlLFNBQUwsRUFBZjs7Ozs4QkFFVzs7UUFFTlYsYUFBTCxHQUFxQixDQUFyQjtRQUNLRCxVQUFMLEdBQWtCLENBQWxCO1FBQ0tFLGNBQUwsR0FBc0IsRUFBdEI7UUFDS0MsU0FBTCxHQUFpQixDQUFqQjtRQUNLQyxTQUFMLEdBQWlCLEdBQWpCOzs7UUFHS0csU0FBTCxDQUFlLFVBQWY7UUFDS0ssY0FBTDs7OzttQ0FFZ0I7UUFDWFgsYUFBTCxHQUFxQixLQUFLWSxlQUFMLEVBQXJCO1FBQ0tSLEVBQUwsQ0FBUVMsWUFBUixDQUFxQixLQUFLYixhQUExQjs7Ozs4QkFFV2MsTUE1Q2IsRUE0Q3FCO1FBQ2RmLFVBQUwsR0FBa0IsS0FBS0MsYUFBdkI7UUFDS0MsY0FBTCxDQUFvQmMsSUFBcEIsQ0FBeUIsS0FBS2YsYUFBOUI7O09BRUdjLFVBQVUsUUFBYixFQUF1QjtTQUNqQlosU0FBTCxHQUFpQixLQUFLSCxVQUF0QjtJQURELE1BRU8sSUFBR2UsVUFBVSxPQUFiLEVBQXNCO1NBQ3ZCWCxTQUFMLEdBQWlCLEtBQUtKLFVBQXRCO0lBRE0sTUFFQSxJQUFHZSxVQUFVLFNBQWIsRUFBd0I7U0FDekJSLFNBQUwsQ0FBZSxLQUFmO1dBQ08sSUFBUDs7O1dBR09yQyxHQUFSLENBQVksY0FBYyxLQUFLZ0MsY0FBL0IsRUFBK0MsVUFBVSxLQUFLQyxTQUE5RCxFQUF5RSxVQUFVLEtBQUtDLFNBQXhGO09BQ0csS0FBS0QsU0FBTCxHQUFlLENBQWYsSUFBb0IsS0FBS0MsU0FBNUIsRUFBdUM7U0FDakNHLFNBQUwsQ0FBZSxZQUFmO1dBQ08sS0FBUDs7UUFFSUssY0FBTDs7OztvQ0FFaUI7TUFDZDtRQUNFZixTQUFTb0IsS0FBS0MsS0FBTCxDQUFXRCxLQUFLRSxNQUFMLE1BQWlCLEtBQUtmLFNBQUwsR0FBaUIsS0FBS0QsU0FBdEIsR0FBa0MsQ0FBbkQsQ0FBWCxJQUFvRSxLQUFLQSxTQUF0RjtJQURELFFBRVEsS0FBS0QsY0FBTCxDQUFvQmtCLFFBQXBCLENBQTZCdkIsTUFBN0IsS0FBd0MsS0FBS00sU0FBTCxHQUFpQixLQUFLQyxTQUZ0RTtVQUdPUCxNQUFQOzs7Ozs7QUNwRUYsSUFBSXdCLE9BQU8sSUFBSXZCLElBQUosRUFBWDtBQUNBdUIsS0FBS0MsSUFBTDs7In0=
